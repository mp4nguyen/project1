"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require("angular2/core");
var common_1 = require('angular2/common');
var dialog_component_1 = require("../../shared/components/dialog/dialog.component");
var logging_service_1 = require('../../shared/services/logging.service');
var bookingtype_model_1 = require('../models/bookingtype.model');
var input_component_1 = require('../../shared/components/input/input.component');
var companies_services_1 = require('../services/companies.services');
var SelectBookingTypeComponent = (function () {
    function SelectBookingTypeComponent(_log, _companyServices) {
        var _this = this;
        this._log = _log;
        this._companyServices = _companyServices;
        this.bt = new bookingtype_model_1.BookingType({ bookingTypeName: '', isenable: 0 });
        this.components = new Array();
        this.bts = [];
        this.isNew = true;
        this.bookingTypeIdControl = new common_1.Control();
        this.bookingTypeNameControl = new common_1.Control();
        this.isenableControl = new common_1.Control();
        this.components.push({ control: this.bookingTypeIdControl, type: 'option', title: 'Booking Type', placeholder: 'Booking Type', isRequired: true, requiredMsg: 'Booking type is required', labelColumnClass: 'col-md-3 control-label', inputColumnClass: 'col-md-9', values: this.bts, values: this.bts, displayProperty: 'bookingTypeName', returnProperty: 'bookingTypeId' });
        this.components.push({ control: this.isenableControl, type: 'boolean', title: 'Enable', placeholder: 'Clinic Name', isRequired: true, requiredMsg: 'Clinic name is required', labelColumnClass: 'col-md-3 control-label', inputColumnClass: 'col-md-9' });
        this.myForm = new common_1.ControlGroup({
            bookingTypeId: this.bookingTypeIdControl,
            bookingTypeName: this.bookingTypeNameControl,
            isenable: this.isenableControl
        });
        this.myForm.valueChanges.subscribe(function (data) { _this._log.log('booking type form = ', JSON.stringify(_this.myForm.value)); });
    }
    SelectBookingTypeComponent.prototype.ngOnInit = function () {
    };
    SelectBookingTypeComponent.prototype.openDialog = function (bt, type) {
        var _this = this;
        this.type = type;
        this._companyServices.getBookingTypes(type).subscribe(function (data) {
            _this.bts = data;
            _this._log.log('bts = ', data);
            _this.components[0] = { control: _this.bookingTypeIdControl, type: 'option', title: 'Booking Type', placeholder: 'Booking Type', isRequired: true, requiredMsg: 'Booking type is required', labelColumnClass: 'col-md-3 control-label', inputColumnClass: 'col-md-9', values: _this.bts, displayProperty: 'bookingTypeName', returnProperty: 'bookingTypeId' };
        }, function (err) { _this._log.log('error = ', err); }, function () { _this._log.log('completed'); });
        if (bt) {
            this.isNew = false;
            this.bt = bt;
            this.updateView();
        }
        else {
            this.isNew = true;
            this.bt = new bookingtype_model_1.BookingType({ bookingTypeName: '', isenable: 0 });
            this.updateView();
        }
        this.myDialog.activate().subscribe(function (code) { _this._log.log('dialog return code =', code); }, function (err) { _this._log.log('dialog return err =', err); }, function () { _this._log.log('dialog completed'); });
    };
    SelectBookingTypeComponent.prototype.updateView = function () {
        this.bookingTypeIdControl.updateValue(this.bt.bookingTypeId);
        this.bookingTypeNameControl.updateValue(this.bt);
        this.isenableControl.updateValue(this.bt.isenable);
    };
    SelectBookingTypeComponent.prototype.remove = function () {
        this._companyServices.doctorRemoveBT(this.bookingTypeIdControl.value, this.type);
        this.myDialog.ok(null);
    };
    SelectBookingTypeComponent.prototype.add = function () {
        this._log.log('bt = ', this.bookingTypeIdControl.value);
        this._companyServices.doctorAddBT(this.bookingTypeIdControl.value, this.type);
        this.myDialog.ok(null);
    };
    __decorate([
        core_1.ViewChild('myDialog'), 
        __metadata('design:type', dialog_component_1.DialogComponent)
    ], SelectBookingTypeComponent.prototype, "myDialog", void 0);
    SelectBookingTypeComponent = __decorate([
        core_1.Component({
            selector: 'select-booking-type',
            directives: [dialog_component_1.DialogComponent, input_component_1.InputComponent],
            template: "\n    <my-dialog #myDialog>\n        <div class=\"modal-header\">\n            <button type=\"button\" (click)=\"myDialog.close()\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"></button>\n            <h4 class=\"modal-title\">Booking Type</h4>\n        </div>\n        <div class=\"modal-body\"> \n             <div class=\"portlet-body form\">\n                    <form role=\"form\">\n                        <div class=\"form-body\">\n                            <div class=\"row\">\n                                <div class=\"col-md-12\">\n                                    <p *ngIf=\"!isNew\">{{bt.bookingTypeName}}\n                                    <div *ngIf=\"isNew\"><my-input [isSubmitted]=\"isSubmitted\" [options]=\"components[0]\"></my-input></div>                                    \n                                </div>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n        </div>\n        <div class=\"modal-footer\">\n            <button (click)=\"myDialog.cancel()\" type=\"button\" class=\"btn dark btn-outline\" data-dismiss=\"modal\">Close</button>\n            <button *ngIf=\"!isNew\" (click)=\"remove()\" type=\"button\" class=\"btn red\">Remove</button>\n            <button *ngIf=\"isNew\" (click)=\"add()\" type=\"button\" class=\"btn green\">Add</button>\n        </div>\n    </my-dialog>    \n    "
        }), 
        __metadata('design:paramtypes', [logging_service_1.MyLogger, companies_services_1.CompaniesService])
    ], SelectBookingTypeComponent);
    return SelectBookingTypeComponent;
}());
exports.SelectBookingTypeComponent = SelectBookingTypeComponent;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBhbmllcy9jb21wb25lbnRzL3NlbGVjdGJvb2tpbmd0eXBlcy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLHFCQUFnRCxlQUFlLENBQUMsQ0FBQTtBQUNoRSx1QkFBMEUsaUJBQWlCLENBQUMsQ0FBQTtBQUU1RixpQ0FBOEIsaURBQWlELENBQUMsQ0FBQTtBQUNoRixnQ0FBdUIsdUNBQXVDLENBQUMsQ0FBQTtBQUMvRCxrQ0FBMEIsNkJBQTZCLENBQUMsQ0FBQTtBQUN4RCxnQ0FBOEIsK0NBQStDLENBQUMsQ0FBQTtBQUM5RSxtQ0FBK0IsZ0NBQWdDLENBQUMsQ0FBQTtBQW1DaEU7SUFlSSxvQ0FBb0IsSUFBYSxFQUFTLGdCQUFrQztRQWZoRixpQkF3RkM7UUF6RXVCLFNBQUksR0FBSixJQUFJLENBQVM7UUFBUyxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO1FBWHBFLE9BQUUsR0FBZ0IsSUFBSSwrQkFBVyxDQUFDLEVBQUMsZUFBZSxFQUFDLEVBQUUsRUFBQyxRQUFRLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztRQUNwRSxlQUFVLEdBQWtCLElBQUksS0FBSyxFQUFVLENBQUM7UUFNL0MsUUFBRyxHQUFnQixFQUFFLENBQUM7UUFDdEIsVUFBSyxHQUFZLElBQUksQ0FBQztRQUsxQixJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxnQkFBTyxFQUFFLENBQUM7UUFDMUMsSUFBSSxDQUFDLHNCQUFzQixHQUFHLElBQUksZ0JBQU8sRUFBRSxDQUFDO1FBQzVDLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxnQkFBTyxFQUFFLENBQUM7UUFHckMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsRUFBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLG9CQUFvQixFQUFFLElBQUksRUFBQyxRQUFRLEVBQUMsS0FBSyxFQUFFLGNBQWMsRUFBRSxXQUFXLEVBQUUsY0FBYyxFQUFFLFVBQVUsRUFBRSxJQUFJLEVB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Q0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0UsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQXJGRDtRQUFDLGdCQUFTLENBQUMsVUFBVSxDQUFDOztnRUFBQTtJQW5DMUI7UUFBQyxnQkFBUyxDQUFDO1lBQ1AsUUFBUSxFQUFFLHFCQUFxQjtZQUMvQixVQUFVLEVBQUUsQ0FBQyxrQ0FBZSxFQUFDLGdDQUFjLENBQUM7WUFDNUMsUUFBUSxFQUNSLHM1Q0EwQkM7U0FDSixDQUFDOztrQ0FBQTtJQTBGRixpQ0FBQztBQUFELENBeEZBLEFBd0ZDLElBQUE7QUF4Rlksa0NBQTBCLDZCQXdGdEMsQ0FBQSIsImZpbGUiOiJjb21wYW5pZXMvY29tcG9uZW50cy9zZWxlY3Rib29raW5ndHlwZXMuY29tcG9uZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtPbkluaXQsIENvbXBvbmVudCxWaWV3Q2hpbGQsSW5wdXR9IGZyb20gXCJhbmd1bGFyMi9jb3JlXCI7XG5pbXBvcnQge0NvbnRyb2wsIFZhbGlkYXRvcnMsIE5nRm9ybU1vZGVsLCBDb250cm9sR3JvdXAsRm9ybUJ1aWxkZXJ9ICBmcm9tICdhbmd1bGFyMi9jb21tb24nO1xuXG5pbXBvcnQge0RpYWxvZ0NvbXBvbmVudH0gZnJvbSBcIi4uLy4uL3NoYXJlZC9jb21wb25lbnRzL2RpYWxvZy9kaWFsb2cuY29tcG9uZW50XCI7XG5pbXBvcnQge015TG9nZ2VyfSBmcm9tICcuLi8uLi9zaGFyZWQvc2VydmljZXMvbG9nZ2luZy5zZXJ2aWNlJztcbmltcG9ydCB7Qm9va2luZ1R5cGV9IGZyb20gJy4uL21vZGVscy9ib29raW5ndHlwZS5tb2RlbCc7XG5pbXBvcnQge0lucHV0Q29tcG9uZW50fSAgZnJvbSAnLi4vLi4vc2hhcmVkL2NvbXBvbmVudHMvaW5wdXQvaW5wdXQuY29tcG9uZW50JztcbmltcG9ydCB7Q29tcGFuaWVzU2VydmljZX0gZnJvbSAnLi4vc2VydmljZXMvY29tcGFuaWVzLnNlcnZpY2VzJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdzZWxlY3QtYm9va2luZy10eXBlJyxcbiAgICBkaXJlY3RpdmVzOiBbRGlhbG9nQ29tcG9uZW50LElucHV0Q29tcG9uZW50XSxcbiAgICB0ZW1wbGF0ZTogXG4gICAgYFxuICAgIDxteS1kaWFsb2cgI215RGlhbG9nPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiAoY2xpY2spPVwibXlEaWFsb2cuY2xvc2UoKVwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvYnV0dG9uPlxuICAgICAgICAgICAgPGg0IGNsYXNzPVwibW9kYWwtdGl0bGVcIj5Cb29raW5nIFR5cGU8L2g0PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj4gXG4gICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBvcnRsZXQtYm9keSBmb3JtXCI+XG4gICAgICAgICAgICAgICAgICAgIDxmb3JtIHJvbGU9XCJmb3JtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCAqbmdJZj1cIiFpc05ld1wiPnt7YnQuYm9va2luZ1R5cGVOYW1lfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJpc05ld1wiPjxteS1pbnB1dCBbaXNTdWJtaXR0ZWRdPVwiaXNTdWJtaXR0ZWRcIiBbb3B0aW9uc109XCJjb21wb25lbnRzWzBdXCI+PC9teS1pbnB1dD48L2Rpdj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPlxuICAgICAgICAgICAgPGJ1dHRvbiAoY2xpY2spPVwibXlEaWFsb2cuY2FuY2VsKClcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gZGFyayBidG4tb3V0bGluZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+Q2xvc2U8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gKm5nSWY9XCIhaXNOZXdcIiAoY2xpY2spPVwicmVtb3ZlKClcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gcmVkXCI+UmVtb3ZlPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uICpuZ0lmPVwiaXNOZXdcIiAoY2xpY2spPVwiYWRkKClcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gZ3JlZW5cIj5BZGQ8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9teS1kaWFsb2c+ICAgIFxuICAgIGBcbn0pXG5cbmV4cG9ydCBjbGFzcyBTZWxlY3RCb29raW5nVHlwZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cbiAgICBAVmlld0NoaWxkKCdteURpYWxvZycpbXlEaWFsb2c6RGlhbG9nQ29tcG9uZW50O1xuXG4gICAgcHJpdmF0ZSBidDogQm9va2luZ1R5cGUgPSBuZXcgQm9va2luZ1R5cGUoe2Jvb2tpbmdUeXBlTmFtZTonJyxpc2VuYWJsZTowfSk7ICAgIFxuICAgIHB1YmxpYyBjb21wb25lbnRzOiBBcnJheTxPYmplY3Q+ID0gbmV3IEFycmF5PE9iamVjdD4oKTtcbiAgICBwdWJsaWMgbXlGb3JtOiBDb250cm9sR3JvdXA7XG5cbiAgICBwcml2YXRlIGJvb2tpbmdUeXBlSWRDb250cm9sOkNvbnRyb2w7XG4gICAgcHJpdmF0ZSBib29raW5nVHlwZU5hbWVDb250cm9sOkNvbnRyb2w7XG4gICAgcHJpdmF0ZSBpc2VuYWJsZUNvbnRyb2w6Q29udHJvbDsgICBcbiAgICBwcml2YXRlIGJ0czogQm9va2luZ1R5cGVbXT1bXTtcbiAgICBwcml2YXRlIGlzTmV3OiBib29sZWFuID0gdHJ1ZTsgICAgXG4gICAgcHJpdmF0ZSB0eXBlOnN0cmluZzsvL3RoaXMgdHlwZSA9IFtET0NUT1IsQ0xJTklDXTsgYXMgdGhpcyBjb21wb25lbnQgaXMgdXNlZCBpbiAyIHRob3NlIGZvcm1zLCBhbmQgZWFjaCBmb3JtIGhhcyB0aGUgZGlmZmVyZW50IG1ldGhvZHMgbGlrZSA6IGxpbmssdW5saW5rOyBzbyBuZWVkIHRvIGtub3cgdGhlIHR5cGUgdG8gY2FsbCBjb3JyZWN0IG1ldGhvZHMgXG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9sb2c6TXlMb2dnZXIscHJpdmF0ZSBfY29tcGFueVNlcnZpY2VzOiBDb21wYW5pZXNTZXJ2aWNlKXtcblxuICAgICAgICB0aGlzLmJvb2tpbmdUeXBlSWRDb250cm9sID0gbmV3IENvbnRyb2woKTtcbiAgICAgICAgdGhpcy5ib29raW5nVHlwZU5hbWVDb250cm9sID0gbmV3IENvbnRyb2woKTtcbiAgICAgICAgdGhpcy5pc2VuYWJsZUNvbnRyb2wgPSBuZXcgQ29udHJvbCgpO1xuXG4gICAgICAgIFxuICAgICAgICB0aGlzLmNvbXBvbmVudHMucHVzaCh7Y29udHJvbDogdGhpcy5ib29raW5nVHlwZUlkQ29udHJvbCwgdHlwZTonb3B0aW9uJyx0aXRsZTogJ0Jvb2tpbmcgVHlwZScsIHBsYWNlaG9sZGVyOiAnQm9va2luZyBUeXBlJywgaXNSZXF1aXJlZDogdHJ1ZSxyZXF1aXJlZE1zZzogJ0Jvb2tpbmcgdHlwZSBpcyByZXF1aXJlZCcsbGFiZWxDb2x1bW5DbGFzczonY29sLW1kLTMgY29udHJvbC1sYWJlbCcsaW5wdXRDb2x1bW5DbGFzczonY29sLW1kLTknLHZhbHVlczp0aGlzLmJ0cyx2YWx1ZXM6dGhpcy5idHMsZGlzcGxheVByb3BlcnR5Oidib29raW5nVHlwZU5hbWUnLHJldHVyblByb3BlcnR5Oidib29raW5nVHlwZUlkJ30pO1xuICAgICAgICB0aGlzLmNvbXBvbmVudHMucHVzaCh7Y29udHJvbDogdGhpcy5pc2VuYWJsZUNvbnRyb2wsIHR5cGU6J2Jvb2xlYW4nLHRpdGxlOiAnRW5hYmxlJywgcGxhY2Vob2xkZXI6ICdDbGluaWMgTmFtZScsIGlzUmVxdWlyZWQ6IHRydWUscmVxdWlyZWRNc2c6ICdDbGluaWMgbmFtZSBpcyByZXF1aXJlZCcsbGFiZWxDb2x1bW5DbGFzczonY29sLW1kLTMgY29udHJvbC1sYWJlbCcsaW5wdXRDb2x1bW5DbGFzczonY29sLW1kLTknfSk7XG5cbiAgICAgICAgdGhpcy5teUZvcm0gPSBuZXcgQ29udHJvbEdyb3VwKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2tpbmdUeXBlSWQ6IHRoaXMuYm9va2luZ1R5cGVJZENvbnRyb2wsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29raW5nVHlwZU5hbWU6IHRoaXMuYm9va2luZ1R5cGVOYW1lQ29udHJvbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzZW5hYmxlOiB0aGlzLmlzZW5hYmxlQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyAgICAgICAgXG5cbiAgICAgICAgdGhpcy5teUZvcm0udmFsdWVDaGFuZ2VzLnN1YnNjcmliZShcbiAgICAgICAgICAgIGRhdGEgPT4geyB0aGlzLl9sb2cubG9nKCdib29raW5nIHR5cGUgZm9ybSA9ICcsIEpTT04uc3RyaW5naWZ5KHRoaXMubXlGb3JtLnZhbHVlKSk7fVxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICBuZ09uSW5pdCgpe1xuXG5cblxuXG4gICAgfVxuXG4gICAgb3BlbkRpYWxvZyhidDpCb29raW5nVHlwZSx0eXBlOnN0cmluZyl7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuX2NvbXBhbnlTZXJ2aWNlcy5nZXRCb29raW5nVHlwZXModHlwZSkuc3Vic2NyaWJlKFxuICAgICAgICAgICAgZGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ0cyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb2cubG9nKCdidHMgPSAnLGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRzWzBdID0ge2NvbnRyb2w6IHRoaXMuYm9va2luZ1R5cGVJZENvbnRyb2wsIHR5cGU6J29wdGlvbicsdGl0bGU6ICdCb29raW5nIFR5cGUnLCBwbGFjZWhvbGRlcjogJ0Jvb2tpbmcgVHlwZScsIGlzUmVxdWlyZWQ6IHRydWUscmVxdWlyZWRNc2c6ICdCb29raW5nIHR5cGUgaXMgcmVxdWlyZWQnLGxhYmVsQ29sdW1uQ2xhc3M6J2NvbC1tZC0zIGNvbnRyb2wtbGFiZWwnLGlucHV0Q29sdW1uQ2xhc3M6J2NvbC1tZC05Jyx2YWx1ZXM6dGhpcy5idHMsZGlzcGxheVByb3BlcnR5Oidib29raW5nVHlwZU5hbWUnLHJldHVyblByb3BlcnR5Oidib29raW5nVHlwZUlkJ307XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnIgPT4ge3RoaXMuX2xvZy5sb2coJ2Vycm9yID0gJyxlcnIpO30sXG4gICAgICAgICAgICAoKSA9PiB7dGhpcy5fbG9nLmxvZygnY29tcGxldGVkJyk7fVxuICAgICAgICAgICAgKTtcblxuICAgICAgICBpZihidCl7XG4gICAgICAgICAgICB0aGlzLmlzTmV3ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmJ0ID0gYnQ7ICAgIFxuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3KCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdGhpcy5pc05ldyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmJ0ID0gbmV3IEJvb2tpbmdUeXBlKHtib29raW5nVHlwZU5hbWU6JycsaXNlbmFibGU6MH0pOyAgICBcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlldygpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLm15RGlhbG9nLmFjdGl2YXRlKCkuc3Vic2NyaWJlKFxuICAgICAgICAgICAgY29kZSA9PiB7dGhpcy5fbG9nLmxvZygnZGlhbG9nIHJldHVybiBjb2RlID0nLGNvZGUpO30sXG4gICAgICAgICAgICBlcnIgPT4gIHt0aGlzLl9sb2cubG9nKCdkaWFsb2cgcmV0dXJuIGVyciA9JyxlcnIpO30sXG4gICAgICAgICAgICAoKSA9PiAge3RoaXMuX2xvZy5sb2coJ2RpYWxvZyBjb21wbGV0ZWQnKTt9LFxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICB1cGRhdGVWaWV3KCl7XG4gICAgICAgIHRoaXMuYm9va2luZ1R5cGVJZENvbnRyb2wudXBkYXRlVmFsdWUodGhpcy5idC5ib29raW5nVHlwZUlkKTtcbiAgICAgICAgdGhpcy5ib29raW5nVHlwZU5hbWVDb250cm9sLnVwZGF0ZVZhbHVlKHRoaXMuYnQpO1xuICAgICAgICB0aGlzLmlzZW5hYmxlQ29udHJvbC51cGRhdGVWYWx1ZSh0aGlzLmJ0LmlzZW5hYmxlKTtcbiAgICB9XG5cbiAgICByZW1vdmUoKXsgICAgICAgIFxuICAgICAgICB0aGlzLl9jb21wYW55U2VydmljZXMuZG9jdG9yUmVtb3ZlQlQodGhpcy5ib29raW5nVHlwZUlkQ29udHJvbC52YWx1ZSx0aGlzLnR5cGUpO1xuICAgICAgICB0aGlzLm15RGlhbG9nLm9rKG51bGwpO1xuICAgIH1cblxuICAgIGFkZCgpeyAgICAgICAgXG4gICAgICAgIHRoaXMuX2xvZy5sb2coJ2J0ID0gJyx0aGlzLmJvb2tpbmdUeXBlSWRDb250cm9sLnZhbHVlKTtcbiAgICAgICAgdGhpcy5fY29tcGFueVNlcnZpY2VzLmRvY3RvckFkZEJUKHRoaXMuYm9va2luZ1R5cGVJZENvbnRyb2wudmFsdWUsdGhpcy50eXBlKTtcbiAgICAgICAgdGhpcy5teURpYWxvZy5vayhudWxsKTtcbiAgICB9XG59XG4iXX0=
