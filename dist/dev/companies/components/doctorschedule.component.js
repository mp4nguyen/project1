"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require("angular2/core");
var common_1 = require("angular2/common");
var schedule_1 = require('../../shared/components/schedule/schedule');
var dialog_component_1 = require("../../shared/components/dialog/dialog.component");
var logging_service_1 = require('../../shared/services/logging.service');
var input_component_1 = require('../../shared/components/input/input.component');
var DoctorScheduleComponent = (function () {
    function DoctorScheduleComponent(_log) {
        this._log = _log;
        this.addedEvent = new core_1.EventEmitter();
        this.resources = [];
        this.dialogVisible = false;
        this.idGen = 100;
        this.components = new Array();
        this.repeatTypes = [
            { name: 'DAILY' },
            { name: 'MONTHLY' },
            { name: 'WEEKLY' },
            { name: '2WEEKLY' },
            { name: '3WEEKLY' },
            { name: '4WEEKLY' },
            { name: '5WEEKLY' },
            { name: '6WEEKLY' },
            { name: '7WEEKLY' },
            { name: '8WEEKLY' }
        ];
        this.rosterIdControl = new common_1.Control();
        this.doctorIdControl = new common_1.Control();
        this.dayOfWeekControl = new common_1.Control();
        this.fromTimeControl = new common_1.Control();
        this.toTimeControl = new common_1.Control();
        this.fromDateControl = new common_1.Control();
        this.toDateControl = new common_1.Control();
        this.workingSiteIdControl = new common_1.Control();
        this.bookingTypeIdControl = new common_1.Control();
        this.timeIntervalControl = new common_1.Control();
        this.repeatTypeControl = new common_1.Control();
        this.isenableControl = new common_1.Control();
        this.components.push({ control: this.fromTimeControl, type: 'text', title: 'From Time', placeholder: 'From time', isRequired: true, requiredMsg: 'Address is required', labelColumnClass: 'col-md-3 control-label', inputColumnClass: 'col-md-9' });
        this.components.push({ control: this.toTimeControl, type: 'text', title: 'To Time', placeholder: 'To time', isRequired: true, requiredMsg: 'Address is required', labelColumnClass: 'col-md-3 control-label', inputColumnClass: 'col-md-9' });
        this.components.push({ control: this.fromDateControl, type: 'text', title: 'From date', placeholder: 'From date', isRequired: true, requiredMsg: 'Address is required', labelColumnClass: 'col-md-3 control-label', inputColumnClass: 'col-md-9' });
        this.components.push({ control: this.toDateControl, type: 'text', title: 'To date', placeholder: 'To date', isRequired: true, requiredMsg: 'Address is required', labelColumnClass: 'col-md-3 control-label', inputColumnClass: 'col-md-9' });
        this.components.push({ control: this.workingSiteIdControl, type: 'option', title: 'Site', placeholder: 'Site', isRequired: false, requiredMsg: 'Ward is required', labelColumnClass: 'col-md-3 control-label', inputColumnClass: 'col-md-9', values: this.workingSites, displayProperty: 'clinicName', returnProperty: 'clinicId' });
        this.components.push({ control: this.bookingTypeIdControl, type: 'option', title: 'Type', placeholder: 'Type', isRequired: true, requiredMsg: 'District is required !!!', labelColumnClass: 'col-md-3 control-label', inputColumnClass: 'col-md-9', values: this.bookingTypes, displayProperty: 'bookingTypeName', returnProperty: 'bookingTypeId' });
        this.components.push({ control: this.timeIntervalControl, type: 'number', title: 'Time Interval', placeholder: 'Time interval', isRequired: true, requiredMsg: 'Province is required !!!', labelColumnClass: 'col-md-3 control-label', inputColumnClass: 'col-md-9' });
        this.components.push({ control: this.repeatTypeControl, type: 'option', title: 'Repeat Type', placeholder: 'Repeat type', isRequired: true, requiredMsg: 'Country is required !!!', labelColumnClass: 'col-md-3 control-label', inputColumnClass: 'col-md-9', values: this.repeatTypes, displayProperty: 'name', returnProperty: 'name' });
        this.myForm = new common_1.ControlGroup({
            rosterId: this.rosterIdControl,
            doctorId: this.doctorIdControl,
            dayOfWeek: this.dayOfWeekControl,
            fromTime: this.fromTimeControl,
            toTime: this.toTimeControl,
            fromDate: this.fromDateControl,
            toDate: this.toDateControl,
            workingSiteId: this.workingSiteIdControl,
            bookingTypeId: this.bookingTypeIdControl,
            timeInterval: this.timeIntervalControl,
            repeatType: this.repeatTypeControl,
            isenable: this.isenableControl
        });
        this.resources = [
            {
                id: 'a',
                title: 'Room A'
            },
            {
                id: 'b',
                title: 'Room B'
            }
        ];
        this.header = {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        };
    }
    DoctorScheduleComponent.prototype.ngOnInit = function () {
        this.components[4] = ({ control: this.workingSiteIdControl, type: 'option', title: 'Site', placeholder: 'Site', isRequired: false, requiredMsg: 'Ward is required', labelColumnClass: 'col-md-3 control-label', inputColumnClass: 'col-md-9', values: this.workingSites, displayProperty: 'clinicName', returnProperty: 'clinicId' });
        this.components[5] = ({ control: this.bookingTypeIdControl, type: 'option', title: 'Type', placeholder: 'Type', isRequired: true, requiredMsg: 'District is required !!!', labelColumnClass: 'col-md-3 control-label', inputColumnClass: 'col-md-9', values: this.bookingTypes, displayProperty: 'bookingTypeName', returnProperty: 'bookingTypeId' });
    };
    DoctorScheduleComponent.prototype.handleDayClick = function (event) {
        var _this = this;
        this.fromTimeControl.updateValue('08:00');
        this.toTimeControl.updateValue('17:00');
        this.fromDateControl.updateValue(event.date.format('YYYY-MM-DD'));
        this.toDateControl.updateValue(event.date.format('YYYY-MM-DD'));
        this.timeIntervalControl.updateValue('15');
        this.repeatTypeControl.updateValue('WEEKLY');
        console.log('handleDayClick events = ', this.events, this.bookingTypes, this.workingSites);
        console.log('handleDayClick event = ', event);
        this.myDialog.activate().subscribe(function (rs) {
            _this._log.log(' dialog result = ', rs);
        });
    };
    DoctorScheduleComponent.prototype.handleEventClick = function (e) {
        console.log('handleEventClick e =', e);
    };
    DoctorScheduleComponent.prototype.saveEvent = function () {
        this._log.log(this.myForm.value);
        this.addedEvent.next(this.myForm.value);
        this.myDialog.ok(null);
    };
    DoctorScheduleComponent.prototype.deleteEvent = function () {
        var index = this.findEventIndexById(this.event.id);
        if (index >= 0) {
            this.events.splice(index, 1);
        }
        this.dialogVisible = false;
    };
    DoctorScheduleComponent.prototype.findEventIndexById = function (id) {
        var index = -1;
        for (var i = 0; i < this.events.length; i++) {
            if (id == this.events[i].id) {
                index = i;
                break;
            }
        }
        return index;
    };
    __decorate([
        core_1.ViewChild('myDialog'), 
        __metadata('design:type', dialog_component_1.DialogComponent)
    ], DoctorScheduleComponent.prototype, "myDialog", void 0);
    __decorate([
        core_1.Input(), 
        __metadata('design:type', Array)
    ], DoctorScheduleComponent.prototype, "events", void 0);
    __decorate([
        core_1.Input(), 
        __metadata('design:type', Array)
    ], DoctorScheduleComponent.prototype, "workingSites", void 0);
    __decorate([
        core_1.Input(), 
        __metadata('design:type', Array)
    ], DoctorScheduleComponent.prototype, "bookingTypes", void 0);
    __decorate([
        core_1.Output(), 
        __metadata('design:type', core_1.EventEmitter)
    ], DoctorScheduleComponent.prototype, "addedEvent", void 0);
    DoctorScheduleComponent = __decorate([
        core_1.Component({
            selector: 'doctor-schedule',
            directives: [dialog_component_1.DialogComponent, input_component_1.InputComponent, schedule_1.Schedule],
            template: "    \n    <p-schedule [events]=\"events\" [defaultView]=\"'month'\" [header]=\"header\" [eventLimit]=\"4\" [editable]=\"true\" (onDayClick)=\"handleDayClick($event)\" (onEventClick)=\"handleEventClick($event)\"></p-schedule>\n    <my-dialog #myDialog>\n        <div class=\"modal-header\">\n            <button type=\"button\" (click)=\"myDialog.close()\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"></button>\n            <h4 class=\"modal-title\">Booking Type</h4>\n        </div>\n        <div class=\"modal-body\"> \n             <div class=\"portlet-body form\">\n                    <form role=\"form\">\n                        <div class=\"form-body\">\n                            <div class=\"row\">\n                                <div class=\"col-md-6\">\n                                    <my-input [isSubmitted]=\"isSubmitted\" [options]=\"components[0]\"></my-input>\n                                </div>\n                                <div class=\"col-md-6\">\n                                    <my-input [isSubmitted]=\"isSubmitted\" [options]=\"components[1]\"></my-input>\n                                </div>                                                                \n                            </div>\n                            <div class=\"row\">\n                                <div class=\"col-md-6\">\n                                    <my-input [isSubmitted]=\"isSubmitted\" [options]=\"components[2]\"></my-input>\n                                </div>\n                                <div class=\"col-md-6\">\n                                    <my-input [isSubmitted]=\"isSubmitted\" [options]=\"components[3]\"></my-input>\n                                </div>                                                                \n                            </div>                            \n                            <div class=\"row\">\n                                <div class=\"col-md-6\">\n                                    <my-input [isSubmitted]=\"isSubmitted\" [options]=\"components[4]\"></my-input>\n                                </div>\n                                <div class=\"col-md-6\">\n                                    <my-input [isSubmitted]=\"isSubmitted\" [options]=\"components[5]\"></my-input>\n                                </div>                                                                \n                            </div>\n                            <div class=\"row\">\n                                <div class=\"col-md-6\">\n                                    <my-input [isSubmitted]=\"isSubmitted\" [options]=\"components[6]\"></my-input>\n                                </div>\n                                <div class=\"col-md-6\">\n                                    <my-input [isSubmitted]=\"isSubmitted\" [options]=\"components[7]\"></my-input>\n                                </div>                                                                                            \n                            </div>\n                        </div>\n                    </form>\n                </div>\n        </div>\n        <div class=\"modal-footer\">\n            <button (click)=\"myDialog.cancel()\" type=\"button\" class=\"btn dark btn-outline\" data-dismiss=\"modal\">Close</button>\n            <button (click)=\"saveEvent()\" type=\"button\" class=\"btn green\">Add</button>\n        </div>\n    </my-dialog>    \n    "
        }), 
        __metadata('design:paramtypes', [logging_service_1.MyLogger])
    ], DoctorScheduleComponent);
    return DoctorScheduleComponent;
}());
exports.DoctorScheduleComponent = DoctorScheduleComponent;
var MyEvent = (function () {
    function MyEvent() {
        this.allDay = true;
    }
    return MyEvent;
}());
exports.MyEvent = MyEvent;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBhbmllcy9jb21wb25lbnRzL2RvY3RvcnNjaGVkdWxlLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQ0EscUJBQW9FLGVBQWUsQ0FBQyxDQUFBO0FBQ3BGLHVCQUFtQyxpQkFBaUIsQ0FBQyxDQUFBO0FBR3JELHlCQUF1QiwyQ0FBMkMsQ0FBQyxDQUFBO0FBRW5FLGlDQUE4QixpREFBaUQsQ0FBQyxDQUFBO0FBQ2hGLGdDQUF1Qix1Q0FBdUMsQ0FBQyxDQUFBO0FBRy9ELGdDQUE4QiwrQ0FBK0MsQ0FBQyxDQUFBO0FBaUU5RTtJQTZDSSxpQ0FBb0IsSUFBYztRQUFkLFNBQUksR0FBSixJQUFJLENBQVU7UUF2Q3hCLGVBQVUsR0FBaUIsSUFBSSxtQkFBWSxFQUFFLENBQUM7UUFHaEQsY0FBUyxHQUFPLEVBQUUsQ0FBQztRQUtuQixrQkFBYSxHQUFZLEtBQUssQ0FBQztRQUUvQixVQUFLLEdBQVcsR0FBRyxDQUFDO1FBRXBCLGVBQVUsR0FBa0IsSUFBSSxLQUFLLEVBQVUsQ0FBQztRQWVoRCxnQkFBVyxHQUFVO1lBQ0csRUFBQyxJQUFJLEVBQUMsT0FBTyxFQUFDO1lBQ2QsRUFBQyxJQUFJLEVBQUMsU0FBUyxFQUFDO1lBQ2hCLEVBQUMsSUFBSSxFQUFDLFFBQVEsRUFBQztZQUNmLEVBQUMsSUFBSSxFQUFDLFNBQVMsRUFBQztZQUNoQixFQUFDLElBQUksRUFBQyxTQUFTLEVBQUM7WUFDaEIsRUFBQyxJQUFJLEVBQUMsU0FBUyxFQUFDO1lBQ2hCLEVBQUMsSUFBSSxFQUFDLFNBQVMsRUFBQztZQUNoQixFQUFDLElBQUksRUFBQyxTQUFTLEVBQUM7WUFDaEIsRUFBQyxJQUFJLEVBQUMsU0FBUyxFQUFDO1lBQ2hCLEVBQUMsSUFBSSxFQUFDLFNBQVMsRUFBQztTQUNmLENBQUM7UUFHOUIsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLGdCQUFPLEVBQUUsQ0FBQztRQUNyQyxJQUFJLENBQUMsZUFBZSxHQUFHLElB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QUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQ3pCLEtBQUssR0FBRyxDQUFDLENBQUM7Z0JBQ1YsS0FBSyxDQUFDO1lBQ1YsQ0FBQztRQUNMLENBQUM7UUFFRCxNQUFNLENBQUMsS0FBSyxDQUFDO0lBQ2pCLENBQUM7SUEzTUQ7UUFBQyxnQkFBUyxDQUFDLFVBQVUsQ0FBQzs7NkRBQUE7SUFDdEI7UUFBQyxZQUFLLEVBQUU7OzJEQUFBO0lBQ1I7UUFBQyxZQUFLLEVBQUU7O2lFQUFBO0lBQ1I7UUFBQyxZQUFLLEVBQUU7O2lFQUFBO0lBQ1I7UUFBQyxhQUFNLEVBQUU7OytEQUFBO0lBakViO1FBQUMsZ0JBQVMsQ0FBQztZQUNQLFFBQVEsRUFBRSxpQkFBaUI7WUFDM0IsVUFBVSxFQUFFLENBQUMsa0NBQWUsRUFBQyxnQ0FBYyxFQUFDLG1CQUFRLENBQUM7WUFDckQsUUFBUSxFQUNSLHU0R0FvREM7U0FDSixDQUFDOzsrQkFBQTtJQWdORiw4QkFBQztBQUFELENBOU1BLEFBOE1DLElBQUE7QUE5TVksK0JBQXVCLDBCQThNbkMsQ0FBQTtBQUVEO0lBQUE7UUFLSSxXQUFNLEdBQVksSUFBSSxDQUFDO0lBQzNCLENBQUM7SUFBRCxjQUFDO0FBQUQsQ0FOQSxBQU1DLElBQUE7QUFOWSxlQUFPLFVBTW5CLENBQUEiLCJmaWxlIjoiY29tcGFuaWVzL2NvbXBvbmVudHMvZG9jdG9yc2NoZWR1bGUuY29tcG9uZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQge09uSW5pdCwgQ29tcG9uZW50LFZpZXdDaGlsZCxJbnB1dCxPdXRwdXQsRXZlbnRFbWl0dGVyfSBmcm9tIFwiYW5ndWxhcjIvY29yZVwiO1xuaW1wb3J0IHtDb250cm9sR3JvdXAsQ29udHJvbH0gZnJvbSBcImFuZ3VsYXIyL2NvbW1vblwiO1xuaW1wb3J0IHtDYWxlbmRhcn0gZnJvbSAncHJpbWVuZy9wcmltZW5nJztcblxuaW1wb3J0IHtTY2hlZHVsZX0gZnJvbSAnLi4vLi4vc2hhcmVkL2NvbXBvbmVudHMvc2NoZWR1bGUvc2NoZWR1bGUnO1xuXG5pbXBvcnQge0RpYWxvZ0NvbXBvbmVudH0gZnJvbSBcIi4uLy4uL3NoYXJlZC9jb21wb25lbnRzL2RpYWxvZy9kaWFsb2cuY29tcG9uZW50XCI7XG5pbXBvcnQge015TG9nZ2VyfSBmcm9tICcuLi8uLi9zaGFyZWQvc2VydmljZXMvbG9nZ2luZy5zZXJ2aWNlJztcbmltcG9ydCB7RG9jdG9yfSBmcm9tICcuLi9tb2RlbHMvZG9jdG9yLm1vZGVsJztcbmltcG9ydCB7UGVvcGxlfSAgZnJvbSAnLi4vLi4vcGVvcGxlL21vZGVscy9wZW9wbGUubW9kZWwnO1xuaW1wb3J0IHtJbnB1dENvbXBvbmVudH0gIGZyb20gJy4uLy4uL3NoYXJlZC9jb21wb25lbnRzL2lucHV0L2lucHV0LmNvbXBvbmVudCc7XG5pbXBvcnQge0NvbXBhbmllc1NlcnZpY2V9IGZyb20gJy4uL3NlcnZpY2VzL2NvbXBhbmllcy5zZXJ2aWNlcyc7XG5cblxuLyo8cC1zY2hlZHVsZSBbcmVzb3VyY2VzXT1cInJlc291cmNlc1wiIFtoZWFkZXJdPVwiaGVhZGVyXCIgZGVmYXVsdERhdGU9XCIyMDE2LTAxLTEyXCIgW2V2ZW50TGltaXRdPVwiNFwiIFtlZGl0YWJsZV09XCJ0cnVlXCIgKG9uRGF5Q2xpY2spPVwiaGFuZGxlRGF5Q2xpY2soJGV2ZW50KVwiIChvbkV2ZW50Q2xpY2spPVwiaGFuZGxlRXZlbnRDbGljaygkZXZlbnQpXCI+PC9wLXNjaGVkdWxlPiovXG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnZG9jdG9yLXNjaGVkdWxlJyxcbiAgICBkaXJlY3RpdmVzOiBbRGlhbG9nQ29tcG9uZW50LElucHV0Q29tcG9uZW50LFNjaGVkdWxlXSxcbiAgICB0ZW1wbGF0ZTogXG4gICAgYCAgICBcbiAgICA8cC1zY2hlZHVsZSBbZXZlbnRzXT1cImV2ZW50c1wiIFtkZWZhdWx0Vmlld109XCInbW9udGgnXCIgW2hlYWRlcl09XCJoZWFkZXJcIiBbZXZlbnRMaW1pdF09XCI0XCIgW2VkaXRhYmxlXT1cInRydWVcIiAob25EYXlDbGljayk9XCJoYW5kbGVEYXlDbGljaygkZXZlbnQpXCIgKG9uRXZlbnRDbGljayk9XCJoYW5kbGVFdmVudENsaWNrKCRldmVudClcIj48L3Atc2NoZWR1bGU+XG4gICAgPG15LWRpYWxvZyAjbXlEaWFsb2c+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIChjbGljayk9XCJteURpYWxvZy5jbG9zZSgpXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9idXR0b24+XG4gICAgICAgICAgICA8aDQgY2xhc3M9XCJtb2RhbC10aXRsZVwiPkJvb2tpbmcgVHlwZTwvaDQ+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPiBcbiAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicG9ydGxldC1ib2R5IGZvcm1cIj5cbiAgICAgICAgICAgICAgICAgICAgPGZvcm0gcm9sZT1cImZvcm1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG15LWlucHV0IFtpc1N1Ym1pdHRlZF09XCJpc1N1Ym1pdHRlZFwiIFtvcHRpb25zXT1cImNvbXBvbmVudHNbMF1cIj48L215LWlucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC02XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bXktaW5wdXQgW2lzU3VibWl0dGVkXT1cImlzU3VibWl0dGVkXCIgW29wdGlvbnNdPVwiY29tcG9uZW50c1sxXVwiPjwvbXktaW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG15LWlucHV0IFtpc1N1Ym1pdHRlZF09XCJpc1N1Ym1pdHRlZFwiIFtvcHRpb25zXT1cImNvbXBvbmVudHNbMl1cIj48L215LWlucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC02XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bXktaW5wdXQgW2lzU3VibWl0dGVkXT1cImlzU3VibWl0dGVkXCIgW29wdGlvbnNdPVwiY29tcG9uZW50c1szXVwiPjwvbXktaW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxteS1pbnB1dCBbaXNTdWJtaXR0ZWRdPVwiaXNTdWJtaXR0ZWRcIiBbb3B0aW9uc109XCJjb21wb25lbnRzWzRdXCI+PC9teS1pbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG15LWlucHV0IFtpc1N1Ym1pdHRlZF09XCJpc1N1Ym1pdHRlZFwiIFtvcHRpb25zXT1cImNvbXBvbmVudHNbNV1cIj48L215LWlucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxteS1pbnB1dCBbaXNTdWJtaXR0ZWRdPVwiaXNTdWJtaXR0ZWRcIiBbb3B0aW9uc109XCJjb21wb25lbnRzWzZdXCI+PC9teS1pbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG15LWlucHV0IFtpc1N1Ym1pdHRlZF09XCJpc1N1Ym1pdHRlZFwiIFtvcHRpb25zXT1cImNvbXBvbmVudHNbN11cIj48L215LWlucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj5cbiAgICAgICAgICAgIDxidXR0b24gKGNsaWNrKT1cIm15RGlhbG9nLmNhbmNlbCgpXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGRhcmsgYnRuLW91dGxpbmVcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPkNsb3NlPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIChjbGljayk9XCJzYXZlRXZlbnQoKVwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBncmVlblwiPkFkZDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICA8L215LWRpYWxvZz4gICAgXG4gICAgYFxufSlcblxuZXhwb3J0IGNsYXNzIERvY3RvclNjaGVkdWxlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICAgIEBWaWV3Q2hpbGQoJ215RGlhbG9nJykgbXlEaWFsb2c6IERpYWxvZ0NvbXBvbmVudDtcbiAgICBASW5wdXQoKSBldmVudHM6IGFueVtdO1xuICAgIEBJbnB1dCgpIHdvcmtpbmdTaXRlczogYW55W107XG4gICAgQElucHV0KCkgYm9va2luZ1R5cGVzOiBhbnlbXTtcbiAgICBAT3V0cHV0KCkgYWRkZWRFdmVudDogRXZlbnRFbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgLy9wcml2YXRlIGV2ZW50czogYW55W109W107ICAgIFxuICAgIHByaXZhdGUgcmVzb3VyY2VzOmFueVtdPVtdO1xuICAgIHByaXZhdGUgaGVhZGVyOiBhbnk7XG4gICAgXG4gICAgcHJpdmF0ZSBldmVudDogTXlFdmVudDtcbiAgICBcbiAgICBwcml2YXRlIGRpYWxvZ1Zpc2libGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBcbiAgICBwcml2YXRlIGlkR2VuOiBudW1iZXIgPSAxMDA7XG4gICAgXG4gICAgcHJpdmF0ZSBjb21wb25lbnRzOiBBcnJheTxPYmplY3Q+ID0gbmV3IEFycmF5PE9iamVjdD4oKTtcbiAgICBwcml2YXRlIG15Rm9ybTogQ29udHJvbEdyb3VwO1xuXG4gICAgcHJpdmF0ZSByb3N0ZXJJZENvbnRyb2w6Q29udHJvbDtcbiAgICBwcml2YXRlIGRvY3RvcklkQ29udHJvbDpDb250cm9sO1xuICAgIHByaXZhdGUgZGF5T2ZXZWVrQ29udHJvbDpDb250cm9sO1xuICAgIHByaXZhdGUgZnJvbVRpbWVDb250cm9sOkNvbnRyb2w7XG4gICAgcHJpdmF0ZSB0b1RpbWVDb250cm9sOkNvbnRyb2w7ICAgIFxuICAgIHByaXZhdGUgZnJvbURhdGVDb250cm9sOkNvbnRyb2w7XG4gICAgcHJpdmF0ZSB0b0RhdGVDb250cm9sOkNvbnRyb2w7XG4gICAgcHJpdmF0ZSB3b3JraW5nU2l0ZUlkQ29udHJvbDpDb250cm9sO1xuICAgIHByaXZhdGUgYm9va2luZ1R5cGVJZENvbnRyb2w6Q29udHJvbDtcbiAgICBwcml2YXRlIHRpbWVJbnRlcnZhbENvbnRyb2w6Q29udHJvbDsgICBcbiAgICBwcml2YXRlIHJlcGVhdFR5cGVDb250cm9sOkNvbnRyb2w7XG4gICAgcHJpdmF0ZSBpc2VuYWJsZUNvbnRyb2w6Q29udHJvbDsgICBcbiAgICBwcml2YXRlIHJlcGVhdFR5cGVzOiBhbnlbXSA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOidEQUlMWSd9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6J01PTlRITFknfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOidXRUVLTFknfSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOicyV0VFS0xZJ30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTonM1dFRUtMWSd9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6JzRXRUVLTFknfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOic1V0VFS0xZJ30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTonNldFRUtMWSd9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6JzdXRUVLTFknfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOic4V0VFS0xZJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfbG9nOiBNeUxvZ2dlcikgeyBcblxuICAgICAgICB0aGlzLnJvc3RlcklkQ29udHJvbCA9IG5ldyBDb250cm9sKCk7XG4gICAgICAgIHRoaXMuZG9jdG9ySWRDb250cm9sID0gbmV3IENvbnRyb2woKTtcbiAgICAgICAgdGhpcy5kYXlPZldlZWtDb250cm9sID0gbmV3IENvbnRyb2woKTtcbiAgICAgICAgdGhpcy5mcm9tVGltZUNvbnRyb2wgPSBuZXcgQ29udHJvbCgpO1xuICAgICAgICB0aGlzLnRvVGltZUNvbnRyb2wgPSBuZXcgQ29udHJvbCgpOyAgICAgICAgXG4gICAgICAgIHRoaXMuZnJvbURhdGVDb250cm9sID0gbmV3IENvbnRyb2woKTtcbiAgICAgICAgdGhpcy50b0RhdGVDb250cm9sID0gbmV3IENvbnRyb2woKTtcbiAgICAgICAgdGhpcy53b3JraW5nU2l0ZUlkQ29udHJvbCA9IG5ldyBDb250cm9sKCk7XG4gICAgICAgIHRoaXMuYm9va2luZ1R5cGVJZENvbnRyb2wgPSBuZXcgQ29udHJvbCgpO1xuICAgICAgICB0aGlzLnRpbWVJbnRlcnZhbENvbnRyb2wgPSBuZXcgQ29udHJvbCgpO1xuICAgICAgICB0aGlzLnJlcGVhdFR5cGVDb250cm9sID0gbmV3IENvbnRyb2woKTsgICAgXHRcbiAgICAgICAgdGhpcy5pc2VuYWJsZUNvbnRyb2wgPSBuZXcgQ29udHJvbCgpOyAgICAgICAgXG5cbiAgICAgICAgdGhpcy5jb21wb25lbnRzLnB1c2goe2NvbnRyb2w6IHRoaXMuZnJvbVRpbWVDb250cm9sLCB0eXBlOid0ZXh0JywgdGl0bGU6ICdGcm9tIFRpbWUnLCBwbGFjZWhvbGRlcjogJ0Zyb20gdGltZScsIGlzUmVxdWlyZWQ6IHRydWUscmVxdWlyZWRNc2c6ICdBZGRyZXNzIGlzIHJlcXVpcmVkJyxsYWJlbENvbHVtbkNsYXNzOidjb2wtbWQtMyBjb250cm9sLWxhYmVsJyxpbnB1dENvbHVtbkNsYXNzOidjb2wtbWQtOSd9KTtcbiAgICAgICAgdGhpcy5jb21wb25lbnRzLnB1c2goe2NvbnRyb2w6IHRoaXMudG9UaW1lQ29udHJvbCwgdHlwZTondGV4dCcsIHRpdGxlOiAnVG8gVGltZScsIHBsYWNlaG9sZGVyOiAnVG8gdGltZScsIGlzUmVxdWlyZWQ6IHRydWUscmVxdWlyZWRNc2c6ICdBZGRyZXNzIGlzIHJlcXVpcmVkJyxsYWJlbENvbHVtbkNsYXNzOidjb2wtbWQtMyBjb250cm9sLWxhYmVsJyxpbnB1dENvbHVtbkNsYXNzOidjb2wtbWQtOSd9KTtcbiAgICAgICAgdGhpcy5jb21wb25lbnRzLnB1c2goe2NvbnRyb2w6IHRoaXMuZnJvbURhdGVDb250cm9sLCB0eXBlOid0ZXh0JywgdGl0bGU6ICdGcm9tIGRhdGUnLCBwbGFjZWhvbGRlcjogJ0Zyb20gZGF0ZScsIGlzUmVxdWlyZWQ6IHRydWUscmVxdWlyZWRNc2c6ICdBZGRyZXNzIGlzIHJlcXVpcmVkJyxsYWJlbENvbHVtbkNsYXNzOidjb2wtbWQtMyBjb250cm9sLWxhYmVsJyxpbnB1dENvbHVtbkNsYXNzOidjb2wtbWQtOSd9KTtcbiAgICAgICAgdGhpcy5jb21wb25lbnRzLnB1c2goe2NvbnRyb2w6IHRoaXMudG9EYXRlQ29udHJvbCwgdHlwZTondGV4dCcsIHRpdGxlOiAnVG8gZGF0ZScsIHBsYWNlaG9sZGVyOiAnVG8gZGF0ZScsIGlzUmVxdWlyZWQ6IHRydWUscmVxdWlyZWRNc2c6ICdBZGRyZXNzIGlzIHJlcXVpcmVkJyxsYWJlbENvbHVtbkNsYXNzOidjb2wtbWQtMyBjb250cm9sLWxhYmVsJyxpbnB1dENvbHVtbkNsYXNzOidjb2wtbWQtOSd9KTtcbiAgICAgICAgdGhpcy5jb21wb25lbnRzLnB1c2goe2NvbnRyb2w6IHRoaXMud29ya2luZ1NpdGVJZENvbnRyb2wsIHR5cGU6J29wdGlvbicsIHRpdGxlOiAnU2l0ZScsIHBsYWNlaG9sZGVyOiAnU2l0ZScsIGlzUmVxdWlyZWQ6IGZhbHNlLHJlcXVpcmVkTXNnOiAnV2FyZCBpcyByZXF1aXJlZCcsbGFiZWxDb2x1bW5DbGFzczonY29sLW1kLTMgY29udHJvbC1sYWJlbCcsaW5wdXRDb2x1bW5DbGFzczonY29sLW1kLTknLHZhbHVlczp0aGlzLndvcmtpbmdTaXRlcyxkaXNwbGF5UHJvcGVydHk6J2NsaW5pY05hbWUnLHJldHVyblByb3BlcnR5OidjbGluaWNJZCd9KTtcbiAgICAgICAgdGhpcy5jb21wb25lbnRzLnB1c2goe2NvbnRyb2w6IHRoaXMuYm9va2luZ1R5cGVJZENvbnRyb2wsIHR5cGU6J29wdGlvbicsIHRpdGxlOiAnVHlwZScsIHBsYWNlaG9sZGVyOiAnVHlwZScsIGlzUmVxdWlyZWQ6IHRydWUscmVxdWlyZWRNc2c6ICdEaXN0cmljdCBpcyByZXF1aXJlZCAhISEnLGxhYmVsQ29sdW1uQ2xhc3M6J2NvbC1tZC0zIGNvbnRyb2wtbGFiZWwnLGlucHV0Q29sdW1uQ2xhc3M6J2NvbC1tZC05Jyx2YWx1ZXM6dGhpcy5ib29raW5nVHlwZXMsZGlzcGxheVByb3BlcnR5Oidib29raW5nVHlwZU5hbWUnLHJldHVyblByb3BlcnR5Oidib29raW5nVHlwZUlkJ30pO1xuICAgICAgICB0aGlzLmNvbXBvbmVudHMucHVzaCh7Y29udHJvbDogdGhpcy50aW1lSW50ZXJ2YWxDb250cm9sLCB0eXBlOidudW1iZXInLCB0aXRsZTogJ1RpbWUgSW50ZXJ2YWwnLCBwbGFjZWhvbGRlcjogJ1RpbWUgaW50ZXJ2YWwnLCBpc1JlcXVpcmVkOiB0cnVlLHJlcXVpcmVkTXNnOiAnUHJvdmluY2UgaXMgcmVxdWlyZWQgISEhJyxsYWJlbENvbHVtbkNsYXNzOidjb2wtbWQtMyBjb250cm9sLWxhYmVsJyxpbnB1dENvbHVtbkNsYXNzOidjb2wtbWQtOSd9KTtcbiAgICAgICAgdGhpcy5jb21wb25lbnRzLnB1c2goe2NvbnRyb2w6IHRoaXMucmVwZWF0VHlwZUNvbnRyb2wsIHR5cGU6J29wdGlvbicsIHRpdGxlOiAnUmVwZWF0IFR5cGUnLCBwbGFjZWhvbGRlcjogJ1JlcGVhdCB0eXBlJywgaXNSZXF1aXJlZDogdHJ1ZSxyZXF1aXJlZE1zZzogJ0NvdW50cnkgaXMgcmVxdWlyZWQgISEhJyxsYWJlbENvbHVtbkNsYXNzOidjb2wtbWQtMyBjb250cm9sLWxhYmVsJyxpbnB1dENvbHVtbkNsYXNzOidjb2wtbWQtOScsdmFsdWVzOnRoaXMucmVwZWF0VHlwZXMsZGlzcGxheVByb3BlcnR5OiduYW1lJyxyZXR1cm5Qcm9wZXJ0eTonbmFtZSd9KTtcblxuICAgICAgICB0aGlzLm15Rm9ybSA9IG5ldyBDb250cm9sR3JvdXAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvc3RlcklkOiB0aGlzLnJvc3RlcklkQ29udHJvbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N0b3JJZDogdGhpcy5kb2N0b3JJZENvbnRyb2wsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5T2ZXZWVrOiB0aGlzLmRheU9mV2Vla0NvbnRyb2wsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbVRpbWU6IHRoaXMuZnJvbVRpbWVDb250cm9sLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvVGltZTogdGhpcy50b1RpbWVDb250cm9sLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tRGF0ZTogdGhpcy5mcm9tRGF0ZUNvbnRyb2wsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9EYXRlOiB0aGlzLnRvRGF0ZUNvbnRyb2wsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29ya2luZ1NpdGVJZDogdGhpcy53b3JraW5nU2l0ZUlkQ29udHJvbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29raW5nVHlwZUlkOiB0aGlzLmJvb2tpbmdUeXBlSWRDb250cm9sLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVJbnRlcnZhbDogdGhpcy50aW1lSW50ZXJ2YWxDb250cm9sLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdFR5cGU6IHRoaXMucmVwZWF0VHlwZUNvbnRyb2wsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNlbmFibGU6IHRoaXMuaXNlbmFibGVDb250cm9sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIFxuLyogICAgICAgIHRoaXMuZXZlbnRzID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwidGl0bGVcIjogXCJBbGwgRGF5IEV2ZW50XCIsXG4gICAgICAgICAgICAgICAgXCJzdGFydFwiOiBcIjIwMTYtMDUtMDFcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcInRpdGxlXCI6IFwiTG9uZyBFdmVudFwiLFxuICAgICAgICAgICAgICAgIFwic3RhcnRcIjogXCIyMDE2LTAxLTA3XCIsXG4gICAgICAgICAgICAgICAgXCJlbmRcIjogXCIyMDE2LTA1LTEwXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJ0aXRsZVwiOiBcIlJlcGVhdGluZyBFdmVudFwiLFxuICAgICAgICAgICAgICAgIFwic3RhcnRcIjogXCIyMDE2LTA1LTA5VDE2OjAwOjAwXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJ0aXRsZVwiOiBcIlJlcGVhdGluZyBFdmVudFwiLFxuICAgICAgICAgICAgICAgIFwic3RhcnRcIjogXCIyMDE2LTA1LTE2VDE2OjAwOjAwXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJ0aXRsZVwiOiBcIkNvbmZlcmVuY2VcIixcbiAgICAgICAgICAgICAgICBcInN0YXJ0XCI6IFwiMjAxNi0wNS0xMVwiLFxuICAgICAgICAgICAgICAgIFwiZW5kXCI6IFwiMjAxNi0wNS0xM1wiXG4gICAgICAgICAgICB9XG4gICAgICAgIF07Ki9cblxuICAgICAgICB0aGlzLnJlc291cmNlcyA9W1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiAnYScsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdSb29tIEEnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiAnYicsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdSb29tIEInXG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG5cbiAgICAgICAgdGhpcy5oZWFkZXIgPSB7XG5cdFx0XHRsZWZ0OiAncHJldixuZXh0IHRvZGF5Jyxcblx0XHRcdGNlbnRlcjogJ3RpdGxlJyxcblx0XHRcdHJpZ2h0OiAnbW9udGgsYWdlbmRhV2VlayxhZ2VuZGFEYXknXG5cdFx0fTtcbiAgICB9XG5cbiAgICBuZ09uSW5pdCgpIHtcblxuICAgICAgICB0aGlzLmNvbXBvbmVudHNbNF0gPSAoe2NvbnRyb2w6IHRoaXMud29ya2luZ1NpdGVJZENvbnRyb2wsIHR5cGU6J29wdGlvbicsIHRpdGxlOiAnU2l0ZScsIHBsYWNlaG9sZGVyOiAnU2l0ZScsIGlzUmVxdWlyZWQ6IGZhbHNlLHJlcXVpcmVkTXNnOiAnV2FyZCBpcyByZXF1aXJlZCcsbGFiZWxDb2x1bW5DbGFzczonY29sLW1kLTMgY29udHJvbC1sYWJlbCcsaW5wdXRDb2x1bW5DbGFzczonY29sLW1kLTknLHZhbHVlczp0aGlzLndvcmtpbmdTaXRlcyxkaXNwbGF5UHJvcGVydHk6J2NsaW5pY05hbWUnLHJldHVyblByb3BlcnR5OidjbGluaWNJZCd9KTtcbiAgICAgICAgdGhpcy5jb21wb25lbnRzWzVdID0gKHtjb250cm9sOiB0aGlzLmJvb2tpbmdUeXBlSWRDb250cm9sLCB0eXBlOidvcHRpb24nLCB0aXRsZTogJ1R5cGUnLCBwbGFjZWhvbGRlcjogJ1R5cGUnLCBpc1JlcXVpcmVkOiB0cnVlLHJlcXVpcmVkTXNnOiAnRGlzdHJpY3QgaXMgcmVxdWlyZWQgISEhJyxsYWJlbENvbHVtbkNsYXNzOidjb2wtbWQtMyBjb250cm9sLWxhYmVsJyxpbnB1dENvbHVtbkNsYXNzOidjb2wtbWQtOScsdmFsdWVzOnRoaXMuYm9va2luZ1R5cGVzLGRpc3BsYXlQcm9wZXJ0eTonYm9va2luZ1R5cGVOYW1lJyxyZXR1cm5Qcm9wZXJ0eTonYm9va2luZ1R5cGVJZCd9KTsgICAgICAgIFxuXG4gICAgfVxuICAgIFxuICAgIGhhbmRsZURheUNsaWNrKGV2ZW50OmFueSkge1xuICAgICAgICAvLyB0aGlzLmV2ZW50ID0gbmV3IE15RXZlbnQoKTtcbiAgICAgICAgLy8gdGhpcy5ldmVudC5zdGFydCA9IGV2ZW50LmRhdGUuZm9ybWF0KCk7XG4gICAgICAgIC8vIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7XG4gICAgICAgIFxuICAgICAgICAvLyAvL3RyaWdnZXIgZGV0ZWN0aW9uIG1hbnVhbGx5IGFzIHNvbWVob3cgb25seSBtb3ZpbmcgdGhlIG1vdXNlIHF1aWNrbHkgYWZ0ZXIgY2xpY2sgdHJpZ2dlcnMgdGhlIGF1dG9tYXRpYyBkZXRlY3Rpb25cbiAgICAgICAgXG4gICAgICAgIC8vIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICB0aGlzLmZyb21UaW1lQ29udHJvbC51cGRhdGVWYWx1ZSgnMDg6MDAnKTtcbiAgICAgICAgdGhpcy50b1RpbWVDb250cm9sLnVwZGF0ZVZhbHVlKCcxNzowMCcpO1xuICAgICAgICB0aGlzLmZyb21EYXRlQ29udHJvbC51cGRhdGVWYWx1ZShldmVudC5kYXRlLmZvcm1hdCgnWVlZWS1NTS1ERCcpKTtcbiAgICAgICAgdGhpcy50b0RhdGVDb250cm9sLnVwZGF0ZVZhbHVlKGV2ZW50LmRhdGUuZm9ybWF0KCdZWVlZLU1NLUREJykpO1xuICAgICAgICB0aGlzLnRpbWVJbnRlcnZhbENvbnRyb2wudXBkYXRlVmFsdWUoJzE1Jyk7XG4gICAgICAgIHRoaXMucmVwZWF0VHlwZUNvbnRyb2wudXBkYXRlVmFsdWUoJ1dFRUtMWScpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdoYW5kbGVEYXlDbGljayBldmVudHMgPSAnLHRoaXMuZXZlbnRzLHRoaXMuYm9va2luZ1R5cGVzLHRoaXMud29ya2luZ1NpdGVzKTtcbiAgICAgICAgY29uc29sZS5sb2coJ2hhbmRsZURheUNsaWNrIGV2ZW50ID0gJyxldmVudCk7XG4gICAgICAgIHRoaXMubXlEaWFsb2cuYWN0aXZhdGUoKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICBycyA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbG9nLmxvZygnIGRpYWxvZyByZXN1bHQgPSAnLHJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIGhhbmRsZUV2ZW50Q2xpY2soZTphbnkpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2hhbmRsZUV2ZW50Q2xpY2sgZSA9JyxlKTtcbi8qICAgICAgICB0aGlzLmV2ZW50ID0gbmV3IE15RXZlbnQoKTtcbiAgICAgICAgdGhpcy5ldmVudC50aXRsZSA9IGUuY2FsRXZlbnQudGl0bGU7XG4gICAgICAgIFxuICAgICAgICBsZXQgc3RhcnQgPSBlLmNhbEV2ZW50LnN0YXJ0O1xuICAgICAgICBsZXQgZW5kID0gZS5jYWxFdmVudC5lbmQ7XG4gICAgICAgIGlmKGUudmlldy5uYW1lID09PSAnbW9udGgnKSB7XG4gICAgICAgICAgICBzdGFydC5zdHJpcFRpbWUoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYoZW5kKSB7XG4gICAgICAgICAgICBlbmQuc3RyaXBUaW1lKCk7XG4gICAgICAgICAgICB0aGlzLmV2ZW50LmVuZCA9IGVuZC5mb3JtYXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZXZlbnQuaWQgPSBlLmNhbEV2ZW50LmlkO1xuICAgICAgICB0aGlzLmV2ZW50LnN0YXJ0ID0gc3RhcnQuZm9ybWF0KCk7XG4gICAgICAgIHRoaXMuZXZlbnQuYWxsRGF5ID0gZS5jYWxFdmVudC5hbGxEYXk7XG4gICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7Ki9cbiAgICB9XG4gICAgXG4gICAgc2F2ZUV2ZW50KCkge1xuICAgICAgICAvL3RoaXMuZXZlbnRzLnB1c2goe3RpdGxlOid0ZXN0JyxzdGFydDp0aGlzLmZyb21EYXRlQ29udHJvbC52YWx1ZSxlbmQ6dGhpcy50b0RhdGVDb250cm9sLnZhbHVlfSk7XG4gICAgICAgIHRoaXMuX2xvZy5sb2codGhpcy5teUZvcm0udmFsdWUpO1xuICAgICAgICB0aGlzLmFkZGVkRXZlbnQubmV4dCh0aGlzLm15Rm9ybS52YWx1ZSk7XG4gICAgICAgIHRoaXMubXlEaWFsb2cub2sobnVsbCk7XG4gICAgfVxuICAgIFxuICAgIGRlbGV0ZUV2ZW50KCkge1xuICAgICAgICBsZXQgaW5kZXg6IG51bWJlciA9IHRoaXMuZmluZEV2ZW50SW5kZXhCeUlkKHRoaXMuZXZlbnQuaWQpO1xuICAgICAgICBpZihpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBmaW5kRXZlbnRJbmRleEJ5SWQoaWQ6IG51bWJlcikge1xuICAgICAgICBsZXQgaW5kZXggPSAtMTtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuZXZlbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZihpZCA9PSB0aGlzLmV2ZW50c1tpXS5pZCkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE15RXZlbnQge1xuICAgIGlkOiBudW1iZXI7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBzdGFydDogc3RyaW5nO1xuICAgIGVuZDogc3RyaW5nO1xuICAgIGFsbERheTogYm9vbGVhbiA9IHRydWU7XG59XG4iXX0=
